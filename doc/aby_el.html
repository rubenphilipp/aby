<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<script src="./robodoc.js"></script>
<title>aby.el</title>
<!-- Source: ./src/aby.el -->
<!-- Generated with ROBODoc Version 4.99.44 (Oct 31 2021) -->
</head>
<body>
<div id="logo">
<a name="robo_top_of_doc"></a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./masterindex.html#top">Index</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_variables.html#top">Variables</a>
</div> <!-- navigation -->
<div id="content">
<hr />
<a name="aby2faby2dauto2dreplacements"></a>
<a name="robo0"></a><h2>aby/aby-auto-replacements [ Variables ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_variables.html#robo_top_of_doc">Variables</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> A list of replacements with the default replacement rules.
 Must be of the following form:
 ((var1 regex1 replacement1 comment1)
  (var2 regex2 replacement2 comment2)
  ;; ...
  (varn regexn replacementn commentn))
 NB: The comment serves documentation purposes and is optional.
</pre>

<hr />
<a name="aby2faby2dfile2dextension"></a>
<a name="robo1"></a><h2>aby/aby-file-extension [ Variables ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_variables.html#robo_top_of_doc">Variables</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> The default extension for Aby instruction files. Default: "<a href="#robo_top_of_doc">aby.el</a>". 
</pre>

<hr />
<a name="aby2faby2dfragments2ddir"></a>
<a name="robo2"></a><h2>aby/aby-fragments-dir [ Variables ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_variables.html#robo_top_of_doc">Variables</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> The source directory of the Aby fragments.
</pre>

<hr />
<a name="aby2faby2dget2dabsolute2dinstruction2dfile2dpath"></a>
<a name="robo3"></a><h2>aby/aby-get-absolute-instruction-file-path [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-04-02
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Return the full file path of single Aby instruction file, e.g. retreived via
 <a href="#robo4">aby-get-instruction-files</a>.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The relative path to an Aby instruction-file.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A string with the full path of the instruction file.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>aby-get-absolute-instruction-file-path</strong> (filename)
</pre>

<hr />
<a name="aby2faby2dget2dinstruction2dfiles"></a>
<a name="robo4"></a><h2>aby/aby-get-instruction-files [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-04-02
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This function reads the contents of the fragment directory and returns
 a list of the relative filenames.
 This is, obviously, necessary for auto-completion. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list with the relative filename paths (without file extension).
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>aby-get-instruction-files</strong> ()
</pre>

<hr />
<a name="aby2faby2dinsert"></a>
<a name="robo5"></a><h2>aby/aby-insert [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-04-02
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This is the core function of Aby. It prompts for a fragment file (in the
 fragments directory) and then performs the replacement and insertion
 process, as defined in the instruction-file.
 The function scans the fragments directory for all .el files, evaluates
 the selected file and parses the data returnd from an replacement rules
 association list (cf. aby-instruct).
 The replacement process order is as follows:
 - static replacements
 - ask-replacements (interactive, cf. aby-instruct)
 - dynamic-replacements
 - auto-replacements
 IMPORTANT: As this function evaluates code, make sure that all .el files
 in your fragments directory are meticulously scrutinized. Otherwise, Aby
 might be able to do some harm to your Emacs.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A string spedifying the Aby fragment to open from the fragments directory
 (optional). When NIL, Aby prompts for a file.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Either T, if the operation succeeded, or NIL, when something failed.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>aby-insert</strong> (&amp;rest fragment)
</pre>

<hr />
<a name="aby2faby2dinstruct"></a>
<a name="robo6"></a><h2>aby/aby-instruct [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-04-02
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This function is is used in Aby instruction files to generate the
 replacements list which will then be parsed by <a href="#robo5">aby-insert</a>.
 It takes the replacements and instructions for preparing the fragments
 in the <a href="#robo5">aby-insert</a> function. These are mainly replacement rules (either
 interactively, by prompting for completions or static values). 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The name of the fragment file (relative to the instruction file).
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - static-rep. A list of three-item-lists with the static, i.e. "hard coded"
   replacements. The list must take the form:
   ((var1 regex1 value1 comment1)
    (var2 regex2 value2 comment2)
    ;; ...
    (varn regexn valuen commentn))
   The first element must be a symbol which serves as the index for the
   association list which is parsed during the <a href="#robo5">aby-insert</a> prodecure. This
   enables accessing the value via a dynamic-rep.
   The comment (string) serves documentation purposes and is optional. 
   Default= NIL.
 - ask-rep. A list of two-item-lists with the regexs to interactively
   replace. The regexs will be interactively replaced with values
   given by the user by prompting. The list must take the form:
   ((var1 regex1 prompt1 comment1)
    (var2 regex2 prompt2 comment2)
    ;; ...
    (varn regexn promptn commentn))
   The prompt must be a string which will be printed in the Minibuffer
   during the read-string query. If it is NIL, the regex will be displayed.
   The comment (string) serves documentation purposes and is optional.
   Default = NIL.
 - dynamic-rep. A list of three-item-lists of the form:
   ((var1 regex1 function1 comment1)
    (var2 regex2 function2 comment2)
    ;; ...
    (varn regexn functionn commentn))
   The function must be either a lambda or existing function that takes
   the replacements association list as first argument and returns the
   replacement value as a string.
   The comment (string) serves documentation purposes and is optional.
   NB: <a href="#robo5">aby-insert</a> automatically adds some elements to the replacements
       association list. These are relevant values which are not directly
       available during the execution of the code in the instruction file
       and are thus passed to the the dynamic-replacement function via the
       replacement list. The following keys will be set:
       - 'aby-fragment-directory. This is the file-name-directory of the
         instruction file. This is very useful when loading additional
         fragment files in the ask-rep lambda function.
         See examples/org/lilypond-src.el for an example.
       - 'buffer-file-name. This is the (buffer-file-name) of the buffer
         visited during insert (i.e. the buffer, the resulting string will
         be pasted in). 
   Default = NIL.
 NB 1: All var items in the *-rep arguments (i.e. the car) must be unique!
 NB 2: When the regex is NIL, no replacements will take place. Instead,
       the value from the list respectively the prompt (in case of ask-rep)
       will be stored in the replacement list. This comes in handy, e.g.
       when dynamically adding certain parts to the output fragment
       depending on previously made decisions via a prompt (cf. the
       org/lilypond-src example).
 - omit-replacements. A boolean indicating whether to omit the
   replacements from the <a href="#robo0">aby-auto-replacements</a>. Default = NIL.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An association list with the replacements rules.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>aby-instruct</strong> (fragment-file
                     &amp;optional
                     static-rep
                     ask-rep
                     dynamic-rep
                     omit-replacements)
</pre>

<hr />
<a name="aby2feval2dfile"></a>
<a name="robo7"></a><h2>aby/eval-file [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-04-01
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Loads the content of an .el file into a temporary buffer, evaluates the
 code and returns the result of the last expression.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The path to the file to be evaluated.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The result of the last expression.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun aby-<strong>eval-file</strong> (file)
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./src/aby.el with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.44 on 2023-04-09 18:26:26</p>
</div> <!-- footer -->
</body>
</html>
